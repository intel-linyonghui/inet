\chapter{The Physical Layer (Transceiver Modeling)}
\label{cha:physicallayer}

\section{The Radio Model}

Wireless network interfaces contain a radio model component, which is
responsible for modeling the physical layer (PHY).\footnote{Wired network interfaces
could similarly contain an explicit PHY model. The reason they do not is that
wired links normally have very low error rates and simple observable behavior,
and there is usually not much to be gained from modeling the physical layer in detail.}
The radio model describes the physical device that is capable of transmitting
and receiving signals on the medium. 

Conceptually, a radio model relies on several sub-models:

\begin{itemize}
  \item antenna model
  \item transmitter model 
  \item receiver model
  \item energy consumer model 
\end{itemize}

The antenna model is shared between the transmitter model and the receiver model.
The separation of the transmitter model and the receiver model allows 
asymmetric configurations. The energy consumer model is optional, and 
it is only used when the simulation of energy consumption is necessary.

TODO multiple implementations are provided for each model. For different
level of detail (abstract/fast versus detailed), different modeling strategy, etc.

TODO different signal representations for models of different detail levels, etc.

\section{IRadio, Radio}

In INET, radio models implement the \nedtype{IRadio} module interface. 
A generic, often used implementation of \nedtype{IRadio} is the 
\nedtype{Radio} NED type. \nedtype{Radio} is an active compound module, 
that is, it has an associated C++ class that encapsulates the computations.

\nedtype{Radio} contains its antenna, transmitter, receiver and energy
consumer models as submodules with parametric types:

\begin{ned}
antenna: <antennaType> like IAntenna;
transmitter: <transmitterType> like ITransmitter;
receiver: <receiverType> like IReceiver;
energyConsumer: <energyConsumerType> like IEnergyConsumer 
    if energyConsumerType != "";
\end{ned}

\nedtype{Radio} has several specialized versions where submodule types
are set to a specific model type. For example, \nedtype{ApskScalarRadio} 
contains \nedtype{IsotropicAntenna}, \nedtype{ApskScalarTransmitter},
and \nedtype{ApskScalarTransmitter}. 


The following sections describe the parts of the radio model.

\section{Antenna Models}

The antenna model describes the effects of the physical device which converts
electric signals into radio waves, and vice versa. This model captures the
antenna characteristics that heavily affect the quality of the communication
channel. For example, various antenna shapes, antenna size and geometry, antenna
arrays, and antenna orientation causes different directional or frequency
selectivity.

The antenna model provides a position and an orientation using a mobility model
that defaults to the mobility of the node. The main purpose of this model is to
compute the antenna gain based on the specific antenna characteristics and the
direction of the signal. The signal direction is computed by the medium from the
position and the orientation of the transmitter and the receiver. The following
list provides some examples:

\begin{itemize}
  \item \nedtype{IsotropicAntenna}: antenna gain is exactly 1 in any direction
  \item \nedtype{ConstantGainAntenna}: antenna gain is a constant determined by
    a parameter
  \item \nedtype{DipoleAntenna}: antenna gain depends on the direction according
    to the dipole antenna characteristics
  \item \nedtype{InterpolatingAntenna}: antenna gain is computed by linear
    interpolation according to a table indexed by the direction angles
\end{itemize}

\section{Transmitter Models}

The transmitter model describes the physical process which converts packets into
electric signals. In other words, this model converts an L2 frame into a signal
that is transmitted on the medium. The conversion process and the representation
of the signal depends on the level of detail and the physical characteristics
of the implemented protocol.

There are two main levels of detail (or modeling depths):
 
\begin{itemize}
\item In the \textit{flat model}, the transmitter model skips the symbol domain 
and the sample domain representations, and it directly creates the analog domain 
representation. The bit domain representation is reduced to the bit length of 
the packet, and the actual bits are ignored.

\item In the \textit{layered model}, the conversion process involves various 
processing steps such as packet serialization, forward error correction encoding, 
scrambling, interleaving, and modulation. This transmitter model requires 
significantly more computation, but it produces accurate bit domain, 
symbol domain, and sample domain representations.
\end{itemize}

Some of the transmitter types available in INET:

\begin{itemize}
  \item \nedtype{UnitDiskTransmitter}
  \item \nedtype{ApskScalarTransmitter}
  \item \nedtype{ApskDimensionalTransmitter}
  \item \nedtype{ApskLayeredTransmitter}
  \item \nedtype{Ieee80211ScalarTransmitter}
  \item \nedtype{Ieee80211DimensionalTransmitter}
\end{itemize}


\section{Receiver Models}

The receiver model describes the physical process which converts electric
signals into packets. In other words, this model converts a reception, along
with an interference computed by the medium model, into a MAC packet and a
reception indication. 

It also determines the following for each transmission: 

\begin{itemize}
  \item \textit{Whether reception is possible}, based on the signal
    characteristics such as reception power, carrier frequency, 
    bandwidth, preamble mode, modulation scheme
  \item Given that reception is possible: \textit{Whether reception is attempted}, 
    based on the ongoing reception and the support of signal capturing
  \item Given that reception is attempted: \textit{whether reception is successful},
    based on the error model and the simulated part of the signal decoding
\end{itemize}

In the flat model the receiver model skips the sample domain, the symbol domain,
and the bit domain representations, and it directly creates the packet domain
representation by copying the packet from the transmission. It uses the error
model to decide if the reception is successful or not.

In the layered model the conversion process involves various processing steps
such as demodulation, descrambling, deinterleaving, forward error correction
decoding, and deserialization. This reception model requires much more
computation, but it produces accurate sample domain, symbol domain, and bit
domain representations.

\section{Transmission Error Modeling}

Determining the reception errors is a crucial part of the reception process.
There are often several different statistical error models in the literature
even for a particular physical layer. In order to support this diversity the
error model is a separate replaceable component of the receiver. 

The error model describes how the signal to noise ratio affects the amount of
errors at the receiver. The main purpose of this model is to determine whether
if the received packet has errors or not. It also computes various physical
layer indications for higher layers such as packet error rate, bit error rate,
and symbol error rate. For the layered reception model it needs to compute the
erroneous bits, symbols, or samples depending on the lowest simulated physical
domain where the real decoding starts. The error model is optional, if omitted
all receptions are considered successful.

\section{Power Consumption Models}

A substantial part of the energy consumption of communication devices comes from
transmitting and receiving signals. The energy consumer model describes how the
radio consumes energy depending on its activity. This model is optional, if
omitted energy consumption is ignored. The following list provides some examples:

\begin{itemize}
  \item \nedtype{StateBasedEnergyConsumer}: the constant power consumption is
    determined by valid combinations of the radio mode, the transmitter state
    and the receiver state
\end{itemize}

\ifdraft
TODO: layered
\section{Layered Radio Model}

This module further splits the transmitter and receiver models to allow bit
precise communication modeling.

TODO: layered

The following sections describe the parts of the layered radio model.

\subsubsection{Encoding and Decoding}

This module describes how the packet domain signal representation is converted
into the bit domain, and vice versa.

TODO: layered

\subsubsection{Modulation and Demodulation}

This module describes how the bit domain signal representation is converted into
the symbol domain, and vice versa.

TODO: layered

\subsubsection{Pulse Shaping and Pulse Filtering}

This module describes how the symbol domain signal representation is converted
into the sample domain, and vice versa.

TODO: layered


\subsubsection{Digital Analog and Analog Digital Conversion}

This module describes how the sample domain signal representation is converted
into the analog domain, and vice versa.

TODO: layered

\fi


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "usman"
%%% End:

